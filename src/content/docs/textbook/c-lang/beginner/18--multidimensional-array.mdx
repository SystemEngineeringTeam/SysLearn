---
title : 多次元配列
slug: http://localhost:4321/textbook/c-lang/beginner/multidimensional-array
---

import { Aside } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Card } from '@astrojs/starlight/components';


`int`や`double`などの単一型の変数を集めたものを配列といいました。
実は、その配列を集めることで『配列の配列』をつくることができます。
実際に、『配列の配列』について学んでいきましょう。


## 多次元配列
---

配列の考え方を応用することで、配列の要素自体が《配列》である配列をつくることができます。

配列を要素型とする配列を**２次元配列**と呼び、この２次元配列を要素型とする配列を**３次元配列**と呼びます。
２次元以上の配列を総称したものが**多次元配列**（multidimensional array）となります。


## ２次元配列
---

例として、３つの要素をもつ２つの配列を考えてみましょう。
１次元配列の宣言は、次のようにして実現することができました。

```c
int a[3] = {1, 2, 3};
int b[3] = {4, 5, 6};
```

これら２つの配列を要素にもつ配列（二次元配列）を宣言する場合、次のようになります。

```c
int c[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};
```

![](/public/chap18_multi_arr.drawio.svg)

<Aside type="note" title="２次元配列の宣言">
- 変数の宣言
`要素型 変数名;`
```c
int a;  // 単一のint型
```
- １次元配列の宣言
`要素型 配列名[要素数];`
```c
int a[3];  // 上記の変数を３個まとめて配列化
```
- ２次元配列の宣言
`要素型 配列名[配列の要素数（行数）][要素の要素数（列数）];`
```c
int a[3][4];  // 上記の配列を４個まとめて配列化
```
</Aside>


## ２次元配列とその走査
---

多次元配列の走査では、多重ループを用いて実現します。

`for`文による二重ループを用いた、二次元配列の走査を確認してみましょう。
次のプログラム`list18_01.c`は、二次元配列によって九九の表を再現したものになります。

```c title="list18_01.c"
#include <stdio.h>

#define ROWS 9  // 行数
#define COLS 9  // 列数

int main(void) {
    int table[9][9];
    
    // 二次元配列の初期化
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            table[i][j] = (i + 1) * (j + 1);
        }
    }
    
    // 九九表の出力
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            printf("%3d", table[i][j]);
        }
        putchar('\n');  // 改行
    }
    
    return 0;
}
```

**実行結果**
```
  1  2  3  4  5  6  7  8  9
  2  4  6  8 10 12 14 16 18
  3  6  9 12 15 18 21 24 27
  4  8 12 16 20 24 28 32 36
  5 10 15 20 25 30 35 40 45
  6 12 18 24 30 36 42 48 54
  7 14 21 28 35 42 49 56 63
  8 16 24 32 40 48 56 64 72
  9 18 27 36 45 54 63 72 81
```


<Card>
### 練習問題1

次の表は、３人の学生のテストの点数をまとめたものになります。
この表の値を二次元配列`scores[3][5]`で初期化し、再現してください。
また、二次元配列のすべての要素を出力してください。

| 学籍番号 | 国語 | 社会 | 算数 | 理科 | 英語 |
| -------- | ---- | ---- | ---- | ---- | ---- |
|   0001   |   58 |   46 |  100 |   89 |   64 |
|   0002   |   98 |   96 |   32 |   38 |   72 |
|   0003   |   34 |   62 |   28 |   88 |   25 |

**実行結果**
```
58, 46, 100, 89, 64, 
98, 96, 32, 38, 72, 
34, 62, 28, 88, 25, 
```
ファイル名: `18_issue1.c`
<details>
<summary>ヒント（二次元配列の初期化）</summary>
<Aside type="tip">
表の値を用いることで、次のようにな二次元配列を作成しましょう。

```c
int scores[3][5] = {
    {58,  46, 100,  89,  64},  // 学籍番号 0001
    {98,  96,  32,  38,  72},  // 学籍番号 0002
    {34,  62,  28,  88,  25}   // 学籍番号 0003
};
```
</Aside>
</details>
<details>
<summary>ヒント（二次元配列の走査）</summary>
<Aside type="tip">
３行５列の要素を持つ二次元配列の走査は、`for`文による二重ループを用いて、次のように実現されます。
適宜改行をはさむことで、出力結果を整形してみましょう。

```c
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 5; j++) {
        printf("%d, ", scores[i][j]);
    }
    printf("\n");  // 改行
}
```
</Aside>
</details>
<details>
<summary>模範解答</summary>
```c title="18_issue1.c"
#include <stdio.h>

int main(void) {
    int scores[3][5] = {
        {58,  46, 100,  89,  64},  // 学籍番号 0001
        {98,  96,  32,  38,  72},  // 学籍番号 0002
        {34,  62,  28,  88,  25}   // 学籍番号 0003
    };
    
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 5; j++) {
            printf("%d, ", scores[i][j]);
        }
        printf("\n");  // 改行
    }
    
    return 0;
}
```
</details>
</Card>


<Card>
### 練習問題2

練習問題１の表にある３人の学生の平均点を、一次元配列`avg[3]`を用いることで算出して格納しなさい。

**実行結果**
```
0001: 71.4
0002: 67.2
0003: 47.4
```
ファイル名: `18_issue2.c`
<details>
<summary>ヒント</summary>
<Aside type="tip">
平均値の算出にあたって、`avg[3]`の要素は`double`型で`0`になるように初期化しましょう。
```
double avg[3] = {0};
```

また、`for`文による二重ループを用いて、一時的に合計点を求め、教科数で割ることにより平均点を求めましょう。
```
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 5; j++) {
        avg[i] += scores[i][j];  // 合計点数を算出
    }
    avg[i] /= 5;  // 平均点数を算出
}
```
</Aside>
</details>
<details>
<summary>模範解答</summary>
```c title="18_issue2.c"
#include <stdio.h>

int main(void) {
    int scores[3][5] = {
        {58,  46, 100,  89,  64},  // 学籍番号 0001
        {98,  96,  32,  38,  72},  // 学籍番号 0002
        {34,  62,  28,  88,  25}   // 学籍番号 0003
    };
    
    double avg[3] = {0};
    
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 5; j++) {
            avg[i] += scores[i][j];  // 合計点数を算出
        }
        avg[i] /= 5;  // 平均点数を算出
    }
    
    // 結果の出力
    for (int i = 0; i < 3; i++) {
        printf("%04d: %.1f\n", i + 1, avg[i]);
    }
    
    return 0;
}
```
</details>
</Card>
